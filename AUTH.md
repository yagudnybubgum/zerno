# Инструкция по авторизации

## Регистрация нового пользователя

### Шаг 1: Откройте страницу регистрации

1. Откройте http://localhost:3001 (или http://localhost:3000, если порт свободен)
2. В правом верхнем углу нажмите **"Регистрация"**
3. Или перейдите напрямую: http://localhost:3001/signup

### Шаг 2: Заполните форму

Заполните поля:
- **Email** (обязательно) - ваш email адрес
- **Никнейм** (необязательно) - отображаемое имя. Если не указать, будет использована часть email до @
- **Пароль** (обязательно) - минимум 6 символов

### Шаг 3: Подтверждение регистрации

**Важно:** По умолчанию Supabase требует подтверждение email.

**Вариант A: Если включено подтверждение email**
1. После регистрации проверьте почту
2. Нажмите на ссылку подтверждения в письме
3. После подтверждения вы автоматически войдёте в систему

**Вариант B: Отключить подтверждение email (для разработки)**
1. В Supabase Dashboard перейдите в **Authentication** → **Providers** → **Email**
2. Отключите опцию **"Confirm email"**
3. Теперь регистрация будет работать без подтверждения

### Шаг 4: После регистрации

После успешной регистрации вы:
- Автоматически войдёте в систему
- Будете перенаправлены на главную страницу
- В шапке вместо "Войти/Регистрация" увидите "Профиль/Выйти"

---

## Вход в систему

### Шаг 1: Откройте страницу входа

1. На главной странице нажмите **"Войти"** в правом верхнем углу
2. Или перейдите напрямую: http://localhost:3001/login

### Шаг 2: Введите данные

- **Email** - тот же, что использовали при регистрации
- **Пароль** - ваш пароль

### Шаг 3: Вход

Нажмите кнопку **"Войти"**. После успешного входа вы будете перенаправлены на главную страницу.

---

## Админ-доступ

Для доступа к админ-панели (создание новых лотов) нужно:

1. **Зарегистрироваться с email из ADMIN_EMAILS**
   - В вашем случае: `cartapeband@gmail.com`
   - Этот email указан в `.env.local` в переменной `ADMIN_EMAILS`

2. **После входа перейти на:**
   - http://localhost:3001/admin/lots/new
   - Или найти ссылку в интерфейсе (если добавлена)

3. **Если email не совпадает:**
   - Вы будете перенаправлены на главную страницу
   - Админ-панель будет недоступна

**Чтобы добавить ещё админов:**
- Откройте `.env.local`
- Измените `ADMIN_EMAILS=email1@example.com,email2@example.com`
- Перезапустите сервер

---

## Профиль пользователя

После входа вы можете:

1. **Открыть профиль:**
   - Нажмите **"Профиль"** в шапке
   - Или перейдите: http://localhost:3001/profile

2. **Изменить никнейм:**
   - В профиле отредактируйте поле "Никнейм"
   - Нажмите "Сохранить"

3. **Просмотреть свои отзывы:**
   - В профиле отображаются все ваши отзывы на кофейные лоты

---

## Выход из системы

1. Нажмите **"Выйти"** в правом верхнем углу
2. Вы будете разлогинены и перенаправлены на главную страницу

---

## Возможные проблемы

### "Invalid login credentials"
- Проверьте правильность email и пароля
- Убедитесь, что вы зарегистрированы

### "Email not confirmed"
- Проверьте почту и подтвердите email
- Или отключите подтверждение в настройках Supabase

### "User already registered"
- Этот email уже зарегистрирован
- Используйте страницу входа вместо регистрации

### Не могу войти после регистрации
- Проверьте, что подтвердили email (если включено)
- Попробуйте войти через страницу входа

---

## Полезные ссылки

- Главная: http://localhost:3001
- Регистрация: http://localhost:3001/signup
- Вход: http://localhost:3001/login
- Профиль: http://localhost:3001/profile
- Админ-панель: http://localhost:3001/admin/lots/new (только для админов)



